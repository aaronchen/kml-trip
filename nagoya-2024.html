<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Matsuyama | Nagoya | Kyoto</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css">

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCikPtaGJr5nKhCpgqnjuwkDz33o94PAgM&libraries=places">
    </script>

    <style>
      .nav-pills { margin: 20px 0; }
      .nav-pills > li > a { padding: 5px 10px; }
      .btn { margin: 5px 0; }
      .label { background-color: #444; display: inline-block; margin: 10px 10px 0 0; padding: 4px 0; width: 45px; }
      .glyphicon-map-marker { color: #333; }
      .glyphicon-arrow-right { color: #999; }
      a:link, a:visited, a:visited:hover, a:hover, a:active { text-decoration: none; }
      #map { width: 100%; height: 300px; }
      @media screen and (max-width: 576px) {
        .control-label { font-size: 12px; font-weight: bold; padding: 8px 0 0 15px; }
        .form-control { margin-left: 10px; width: 95%; }
        .radio { margin-left: 10px; }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h4>
        <a href="https://www.google.com/maps/d/viewer?mid=1nLPxyz5EOoL4ys7wHuXlPiyZbCz3-wY&hl=en&usp=sharing" target="_blank">Matsuyama | Nagoya | Kyoto</a>
      </h4>

      <ul class="nav nav-pills">
        
        <li class='active'>
          <a href='#' data-group='0'>
            松山 Matsuyama (06/23-06/25)
          </a>
        </li>
  
        <li class='active'>
          <a href='#' data-group='1'>
            名古屋 Nagoya (06/25-06/28)
          </a>
        </li>
  
        <li class='active'>
          <a href='#' data-group='2'>
            京都 Kyoto (06/28-06/30)
          </a>
        </li>
  
        <li class='active'>
          <a href='#' data-group='3'>
            大阪 Osaka (06/30)
          </a>
        </li>
  
      </ul>

      <form class="form-horizontal">
        <div class="form-group">
          <label class="col-sm-1 col-xs-1 control-label" for="from">From:</label>
          <div class="col-sm-11 col-xs-11">
            <select id="from" class="form-control">
              
              <option value="" data-color="#d3a">Current Location</option>

              <option value='33.8275824,132.7007102'
                      data-group='0'
                      data-color='FF5252'
                      data-placeid='ChIJgT2XZC7wTzURsxCmwsQ8MuI'>
                松山空港 Matsuyama Airport (MYJ)
              </option>
    
              <option value='33.835862,132.7617311'
                      data-group='0'
                      data-color='FF5252'
                      data-placeid='ChIJKSJMp8rlTzURKnphYorCaQ0'>
                REF Matsuyama City Station
              </option>
    
              <option value='33.8455768,132.7655346'
                      data-group='0'
                      data-color='558B2F'
                      data-placeid='ChIJG4z5T-vlTzURgnujh60lGEo'>
                松山城 Matsuyama-jō Castle
              </option>
    
              <option value='33.8424389,132.7681889'
                      data-group='0'
                      data-color='558B2F'
                      data-placeid='ChIJtfRWjuzlTzURVljQ3ObCQMk'>
                萬翠荘 Bansuisō
              </option>
    
              <option value='33.8385582,132.7700905'
                      data-group='0'
                      data-color='A52714'
                      data-placeid='ChIJP8Aj7e3lTzUR5kb1j_s7e_s'>
                大街道商店街
              </option>
    
              <option value='33.8504052,132.7850492'
                      data-group='0'
                      data-color='9C27B0'
                      data-placeid='ChIJe9IW79flTzURiR6AGKOXUXY'>
                道後温泉駅 Dogo Onsen Station
              </option>
    
              <option value='33.8520748,132.7864098'
                      data-group='0'
                      data-color='9C27B0'
                      data-placeid='ChIJ84F-kHjmTzURebGHHI1YWXw'>
                道後温泉本館 Dogo Onsen Main Building
              </option>
    
              <option value='33.850758,132.7850678'
                      data-group='0'
                      data-color='9C27B0'
                      data-placeid='ChIJN-p2mXDlTzURIGI0Vkzx8-c'>
                道後商店街入口
              </option>
    
              <option value='33.8478959,132.7964742'
                      data-group='0'
                      data-color='9C27B0'
                      data-placeid='ChIJSSDm7WTmTzURF-EkY7Pqb74'>
                石手寺 Ishiteji Temple
              </option>
    
              <option value='34.8589005,136.8115337'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                Chubu Centrair International Airport (NGO)
              </option>
    
              <option value='35.1699313,136.8868475'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                Mitsui Garden Hotel Nagoya Premier
              </option>
    
              <option value='35.1847501,136.8996883'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                名古屋城 Nagoya Castle
              </option>
    
              <option value='35.1596892,136.8994186'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                大須観音 Osu Kannon
              </option>
    
              <option value='35.1590184,136.9026062'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                大須商店街 Osu Shōtengai Shopping District
              </option>
    
              <option value='35.1273579,136.9086948'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                熱田神宮 Atsuta Jingu
              </option>
    
              <option value='35.1750449,137.0887689'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                吉卜力公園 Ghibli Park
              </option>
    
              <option value='35.0506065,136.8438293'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                樂高 Legoland Japan Resort
              </option>
    
              <option value='35.0905088,136.8784377'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                名古屋港水族館 Port Of Nagoya Public Aquarium
              </option>
    
              <option value='36.2550982,136.9022991'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                白川郷合掌造り民家園 Shirakawa-go Gassho-Zukuri Minka-en
              </option>
    
              <option value='36.1418055,137.2594747'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                飛騨高山古い町並 三町伝統的建造物群保存地区 The old townscape of Hidatakayama Sanmachi Historic District
              </option>
    
              <option value='35.3883604,136.9391766'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                犬山城 Inuyama Castle
              </option>
    
              <option value='35.383611,136.93944'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                犬山城下町 Inuyama-jokamachi
              </option>
    
              <option value='35.3404417,136.9885261'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                博物館明治村 Museum Meiji-Mura
              </option>
    
              <option value='35.2165651,136.8435922'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                清洲城 Kiyosu Castle
              </option>
    
              <option value='35.1690894,136.8900967'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                kako柳橋店 KAKO Coffeehouse
              </option>
    
              <option value='35.1711462,136.8854761'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                鮨 花車 Sushi Hanakuruma
              </option>
    
              <option value='35.1720007,136.8847589'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                築地青空三代目 Tsukiji Aozora Sandaime 
              </option>
    
              <option value='35.1721844,136.8848599'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                築地 男前鮓 Tsukiji Otokomae
              </option>
    
              <option value='35.1689024,136.8890789'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                立食壽司 極
              </option>
    
              <option value='35.1747825,136.8840462'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                鮨 いし黒 Sushi Ishiguro
              </option>
    
              <option value='35.1719947,136.8845283'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                焼うおいし川名古屋店 Yakiuo Ishikawa Nagoya
              </option>
    
              <option value='35.1616781,136.9062361'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                矢場とん 矢場町本店 Misokatsu Yabaton Yaba-cho Honten
              </option>
    
              <option value='35.169503,136.8839233'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                矢場とん 名古屋駅名鉄店 Misokatsu Yabaton (9F)
              </option>
    
              <option value='34.985849,135.7587667'
                      data-group='2'
                      data-color='FF5252'
                      data-placeid=''>
                Kyoto Station
              </option>
    
              <option value='34.9864196,135.7612921'
                      data-group='2'
                      data-color='FF5252'
                      data-placeid=''>
                The Thousand Kyoto
              </option>
    
              <option value='34.8892908,135.8076783'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Byodo-in 平等院
              </option>
    
              <option value='34.891707,135.806012'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Byodo-in Omotesando 平等院表参道
              </option>
    
              <option value='34.8901987,135.809398'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Asagiribashi Bridge 朝霧橋
              </option>
    
              <option value='34.8910925,135.8107205'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Uji Shrine 宇治神社
              </option>
    
              <option value='34.8919274,135.8112954'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Ujikami Shrine 宇治上神社
              </option>
    
              <option value='35.0344943,135.7182634'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Ryōan-ji 龍安寺
              </option>
    
              <option value='35.0036258,135.7750405'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Hanamikoji Street 花見小路
              </option>
    
              <option value='34.9981744,135.7808578'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Ninenzaka 二寧坂 (二年坂)
              </option>
    
              <option value='34.9966644,135.781008'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Sannenzaka 産寧坂 (三年坂)
              </option>
    
              <option value='34.9946662,135.784661'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Kiyomizu-dera 清水寺
              </option>
    
              <option value='35.002963,135.7758531'
                      data-group='2'
                      data-color='FF5252'
                      data-placeid=''>
                Nikunotakumi Miyoshi にくの匠 三芳
              </option>
    
              <option value='35.0039689,135.7736021'
                      data-group='2'
                      data-color='FF5252'
                      data-placeid=''>
                Tenshu 天周
              </option>
    
              <option value='34.7906631,135.4412115'
                      data-group='3'
                      data-color='FF5252'
                      data-placeid=''>
                Osaka International Airport (ITM)
              </option>
    
            </select>
          </div>
        </div>

        <div class="form-group">
          <label class="col-sm-1 col-xs-1 control-label" for="to">To:</label>
          <div class="col-sm-11 col-xs-11">
            <select id="to" class="form-control">
              
              <option value="" data-color="#d3a">Current Location</option>

              <option value='33.8275824,132.7007102'
                      data-group='0'
                      data-color='FF5252'
                      data-placeid='ChIJgT2XZC7wTzURsxCmwsQ8MuI'>
                松山空港 Matsuyama Airport (MYJ)
              </option>
    
              <option value='33.835862,132.7617311'
                      data-group='0'
                      data-color='FF5252'
                      data-placeid='ChIJKSJMp8rlTzURKnphYorCaQ0'>
                REF Matsuyama City Station
              </option>
    
              <option value='33.8455768,132.7655346'
                      data-group='0'
                      data-color='558B2F'
                      data-placeid='ChIJG4z5T-vlTzURgnujh60lGEo'>
                松山城 Matsuyama-jō Castle
              </option>
    
              <option value='33.8424389,132.7681889'
                      data-group='0'
                      data-color='558B2F'
                      data-placeid='ChIJtfRWjuzlTzURVljQ3ObCQMk'>
                萬翠荘 Bansuisō
              </option>
    
              <option value='33.8385582,132.7700905'
                      data-group='0'
                      data-color='A52714'
                      data-placeid='ChIJP8Aj7e3lTzUR5kb1j_s7e_s'>
                大街道商店街
              </option>
    
              <option value='33.8504052,132.7850492'
                      data-group='0'
                      data-color='9C27B0'
                      data-placeid='ChIJe9IW79flTzURiR6AGKOXUXY'>
                道後温泉駅 Dogo Onsen Station
              </option>
    
              <option value='33.8520748,132.7864098'
                      data-group='0'
                      data-color='9C27B0'
                      data-placeid='ChIJ84F-kHjmTzURebGHHI1YWXw'>
                道後温泉本館 Dogo Onsen Main Building
              </option>
    
              <option value='33.850758,132.7850678'
                      data-group='0'
                      data-color='9C27B0'
                      data-placeid='ChIJN-p2mXDlTzURIGI0Vkzx8-c'>
                道後商店街入口
              </option>
    
              <option value='33.8478959,132.7964742'
                      data-group='0'
                      data-color='9C27B0'
                      data-placeid='ChIJSSDm7WTmTzURF-EkY7Pqb74'>
                石手寺 Ishiteji Temple
              </option>
    
              <option value='34.8589005,136.8115337'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                Chubu Centrair International Airport (NGO)
              </option>
    
              <option value='35.1699313,136.8868475'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                Mitsui Garden Hotel Nagoya Premier
              </option>
    
              <option value='35.1847501,136.8996883'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                名古屋城 Nagoya Castle
              </option>
    
              <option value='35.1596892,136.8994186'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                大須観音 Osu Kannon
              </option>
    
              <option value='35.1590184,136.9026062'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                大須商店街 Osu Shōtengai Shopping District
              </option>
    
              <option value='35.1273579,136.9086948'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                熱田神宮 Atsuta Jingu
              </option>
    
              <option value='35.1750449,137.0887689'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                吉卜力公園 Ghibli Park
              </option>
    
              <option value='35.0506065,136.8438293'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                樂高 Legoland Japan Resort
              </option>
    
              <option value='35.0905088,136.8784377'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                名古屋港水族館 Port Of Nagoya Public Aquarium
              </option>
    
              <option value='36.2550982,136.9022991'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                白川郷合掌造り民家園 Shirakawa-go Gassho-Zukuri Minka-en
              </option>
    
              <option value='36.1418055,137.2594747'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                飛騨高山古い町並 三町伝統的建造物群保存地区 The old townscape of Hidatakayama Sanmachi Historic District
              </option>
    
              <option value='35.3883604,136.9391766'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                犬山城 Inuyama Castle
              </option>
    
              <option value='35.383611,136.93944'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                犬山城下町 Inuyama-jokamachi
              </option>
    
              <option value='35.3404417,136.9885261'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                博物館明治村 Museum Meiji-Mura
              </option>
    
              <option value='35.2165651,136.8435922'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                清洲城 Kiyosu Castle
              </option>
    
              <option value='35.1690894,136.8900967'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                kako柳橋店 KAKO Coffeehouse
              </option>
    
              <option value='35.1711462,136.8854761'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                鮨 花車 Sushi Hanakuruma
              </option>
    
              <option value='35.1720007,136.8847589'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                築地青空三代目 Tsukiji Aozora Sandaime 
              </option>
    
              <option value='35.1721844,136.8848599'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                築地 男前鮓 Tsukiji Otokomae
              </option>
    
              <option value='35.1689024,136.8890789'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                立食壽司 極
              </option>
    
              <option value='35.1747825,136.8840462'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                鮨 いし黒 Sushi Ishiguro
              </option>
    
              <option value='35.1719947,136.8845283'
                      data-group='1'
                      data-color='FF5252'
                      data-placeid=''>
                焼うおいし川名古屋店 Yakiuo Ishikawa Nagoya
              </option>
    
              <option value='35.1616781,136.9062361'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                矢場とん 矢場町本店 Misokatsu Yabaton Yaba-cho Honten
              </option>
    
              <option value='35.169503,136.8839233'
                      data-group='1'
                      data-color='0288D1'
                      data-placeid=''>
                矢場とん 名古屋駅名鉄店 Misokatsu Yabaton (9F)
              </option>
    
              <option value='34.985849,135.7587667'
                      data-group='2'
                      data-color='FF5252'
                      data-placeid=''>
                Kyoto Station
              </option>
    
              <option value='34.9864196,135.7612921'
                      data-group='2'
                      data-color='FF5252'
                      data-placeid=''>
                The Thousand Kyoto
              </option>
    
              <option value='34.8892908,135.8076783'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Byodo-in 平等院
              </option>
    
              <option value='34.891707,135.806012'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Byodo-in Omotesando 平等院表参道
              </option>
    
              <option value='34.8901987,135.809398'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Asagiribashi Bridge 朝霧橋
              </option>
    
              <option value='34.8910925,135.8107205'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Uji Shrine 宇治神社
              </option>
    
              <option value='34.8919274,135.8112954'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Ujikami Shrine 宇治上神社
              </option>
    
              <option value='35.0344943,135.7182634'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Ryōan-ji 龍安寺
              </option>
    
              <option value='35.0036258,135.7750405'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Hanamikoji Street 花見小路
              </option>
    
              <option value='34.9981744,135.7808578'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Ninenzaka 二寧坂 (二年坂)
              </option>
    
              <option value='34.9966644,135.781008'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Sannenzaka 産寧坂 (三年坂)
              </option>
    
              <option value='34.9946662,135.784661'
                      data-group='2'
                      data-color='0288D1'
                      data-placeid=''>
                Kiyomizu-dera 清水寺
              </option>
    
              <option value='35.002963,135.7758531'
                      data-group='2'
                      data-color='FF5252'
                      data-placeid=''>
                Nikunotakumi Miyoshi にくの匠 三芳
              </option>
    
              <option value='35.0039689,135.7736021'
                      data-group='2'
                      data-color='FF5252'
                      data-placeid=''>
                Tenshu 天周
              </option>
    
              <option value='34.7906631,135.4412115'
                      data-group='3'
                      data-color='FF5252'
                      data-placeid=''>
                Osaka International Airport (ITM)
              </option>
    
            </select>
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-11 col-sm-offset-1 col-xs-11 col-xs-offset-1">
            <div class="radio">
              <label class="radio-inline">
                <input type="radio" name="mode" value="1" checked> Transit
              </label>
              <label class="radio-inline">
                <input type="radio" name="mode" value="2"> Driving
              </label>
              <label class="radio-inline">
                <input type="radio" name="mode" value="3"> Walking
              </label>
            </div>
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-12 col-xs-12">
            <button class="btn btn-primary btn-block" type="button" id="route">Route</button>
          </div>
        </div>
      </form>

      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">
            <span class="glyphicon glyphicon-screenshot"></span> Map Directions
          </h3>
        </div>
        <div class="panel-body">
          <div><span class="label">Apple</span><span id="apple">No Route Yet</span></div>
          <div><span class="label">Google</span><span id="google">No Route Yet</span></div>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">
            <span class="glyphicon glyphicon-exclamation-sign"></span> Place Info
          </h3>
        </div>
        <div class="panel-body">
          <div id="map"></div>
        </div>
      </div>
    </div>

    <script>
      var from_html = $('#from').html();
      var to_html = $('#to').html();
      // var icon_colors = ['4E342E','0288D1','558B2F','673AB7','E65100'];

      $('.nav-pills a').on('click', function (event) {
        event.preventDefault();
        var group = $(this).data('group');
        $(this).closest('li').toggleClass('active');

        $('#from').html(from_html).change();
        $('#to').html(to_html);
        $('li:not([class^="active"])').each(function () {
          var hide_group = $(this).find('a').data('group');
          $(`option[data-group="${hide_group}"]`).remove();
        });
      });

      $('#from, #to, [name="mode"]').on('click', function () {
        $('#apple').empty().append('No Route Yet');
        $('#google').empty().append('No Route Yet');
      });

      $('#route').on('click', function () {
        var from_value = $('#from').val();
        var from_text = $('#from option:selected').text();
        var from_color = $('#from option:selected').data('color');
        var to_value = $('#to').val();
        var to_text = $('#to option:selected').text();
        var to_color = $('#to option:selected').data('color');
        var mode = $('[name="mode"]:checked').val();
        var href_text = `
          <span class="glyphicon glyphicon-map-marker"></span>
          <span style='color: #${from_color};'>${from_text}</span>
          &nbsp;<span class="glyphicon glyphicon-arrow-right"></span>&nbsp;
          <span class="glyphicon glyphicon-map-marker"></span>
          <span style='color: #${to_color};'>${to_text}</span>
        `;

        var mode_apple = 'r';
        var mode_google = 'transit';

        if (mode == 2) { mode_apple = 'd'; mode_google = 'driving'; }
        else if (mode == 3) { mode_apple = 'w'; mode_google = 'walking'; }

        var api_apple = `http://maps.apple.com/?saddr=${from_value}&daddr=${to_value}&dirflg=${mode_apple}`;
        var api_google = `https://www.google.com/maps/dir/?api=1&origin=${from_value}&destination=${to_value}&travelmode=${mode_google}`;

        $('#apple').empty().append(`<a href="${api_apple}" target="_blank">${href_text}</a>`);
        $('#google').empty().append(`<a href="${api_google}" target="_blank">${href_text}</a>`);
      });

      $('#from').on('change', function () {
        var location = $(this).val();
        var geocode = location.split(',');
        var place_name = $(this).find('option:selected').text();
        // var color = $(this).find('option:selected').data('color');
        var place_id = $(this).find('option:selected').data('placeid') || '';

        // if (icon_colors.indexOf(color) < 0) { color = 'E65100'; }

        if (geocode.length == 2) {
          var map = new google.maps.Map($('#map')[0], {
            center: {lat: Number(geocode[0]), lng: Number(geocode[1])},
            zoom: 19
          });

          if (place_id) {
            var infowindow = new google.maps.InfoWindow();
            var service = new google.maps.places.PlacesService(map);
            service.getDetails({ placeId: place_id }, function (place, status) {
              if (status == google.maps.places.PlacesServiceStatus.OK) {
                var marker = new google.maps.Marker({
                  map: map,
                  position: place.geometry.location,
                  // icon: {
                  //   url: `images/icon-${color}.png`,
                  //   size: new google.maps.Size(35, 35),
                  //   origin: new google.maps.Point(0, 0),
                  //   anchor: new google.maps.Point(17, 34),
                  //   scaledSize: new google.maps.Size(35, 35)
                  // }
                });
                google.maps.event.addListener(marker, 'click', function() {
                  infowindow.setContent(`
                    <div>
                      <strong>${place_name}</strong><br />
                      Rating: <strong>${place.rating}</strong><br />
                      <a href="${place.url}" target="_blank">View on Google Maps</a>
                    </div>
                  `);
                  infowindow.open(map, this);
                });
              }
            });
          }
        } else {
          $('#map').empty();
        }
      });
    </script>
  </body>
</html>
